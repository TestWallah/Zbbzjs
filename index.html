<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Topper OS 2026</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlRvcHBlciBPUyIsCiAgInNob3J0X25hbWUiOiAiVG9wcGVyIiwKICAic3RhcnRfdXJsIjogIi4iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiMwMDAwMDAiLAogICJ0aGVtZV9jb2xvciI6ICIjMDAwMDAwIiwKICAiaWNvbnMiOiBbXQp9">

    <!-- Tailwind & Icons -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;900&display=swap" rel="stylesheet">

    <style>
        /* APP FEEL CSS */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000;
            color: #fff;
            overscroll-behavior: none;
            -webkit-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* Hide Scrollbar but allow scroll */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Neon Glows */
        .neon-text {
            text-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
        }
        .neon-border {
            box-shadow: 0 0 15px rgba(56, 189, 248, 0.15);
        }

        /* Checkbox Animation */
        .check-box {
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .check-box.checked {
            background-color: #22c55e;
            border-color: #22c55e;
            transform: scale(1.1);
        }

        /* Task Completed Line */
        .task-title {
            transition: color 0.3s;
        }
        .checked-task .task-title {
            text-decoration: line-through;
            color: #525252;
        }

        /* Install Button Pulse */
        @keyframes pulse-ring {
            0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }
        .install-anim {
            animation: pulse-ring 2s infinite;
        }

        /* Bottom Nav Active State */
        .nav-item.active {
            color: #38bdf8;
        }
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            width: 4px;
            height: 4px;
            background: #38bdf8;
            border-radius: 50%;
        }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <!-- HEADER: Fixed Top -->
    <header class="flex-none px-5 pt-12 pb-4 bg-black/80 backdrop-blur-xl border-b border-white/10 z-50 flex justify-between items-center">
        <div>
            <h1 class="text-2xl font-black tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-emerald-400">
                TOPPER OS
            </h1>
            <p class="text-[10px] text-gray-400 font-medium tracking-widest uppercase">Class 10 Edition</p>
        </div>
        
        <!-- THE MAGIC INSTALL BUTTON -->
        <button id="install-btn" class="hidden install-anim bg-white text-black px-4 py-2 rounded-full text-xs font-bold flex items-center gap-2 active:scale-95 transition-transform">
            <i data-lucide="download-cloud" class="w-4 h-4"></i>
            INSTALL APP
        </button>
    </header>

    <!-- SCROLLABLE CONTENT AREA -->
    <main id="app-content" class="flex-1 overflow-y-auto no-scrollbar relative">
        <!-- Content Injected via JS -->
    </main>

    <!-- BOTTOM NAVIGATION -->
    <nav class="flex-none h-20 bg-black/90 backdrop-blur-lg border-t border-white/10 flex justify-around items-center px-2 pb-2 z-50">
        <button onclick="router('home')" class="nav-item active flex flex-col items-center justify-center w-16 h-16 relative text-gray-500 transition-colors">
            <i data-lucide="home" class="w-6 h-6 mb-1"></i>
            <span class="text-[10px] font-medium">Home</span>
        </button>
        <button onclick="router('syllabus')" class="nav-item flex flex-col items-center justify-center w-16 h-16 relative text-gray-500 transition-colors">
            <i data-lucide="list-todo" class="w-6 h-6 mb-1"></i>
            <span class="text-[10px] font-medium">Plan</span>
        </button>
        <button onclick="router('boost')" class="nav-item flex flex-col items-center justify-center w-16 h-16 relative text-gray-500 transition-colors">
            <i data-lucide="zap" class="w-6 h-6 mb-1"></i>
            <span class="text-[10px] font-medium">Boost</span>
        </button>
    </nav>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA ENGINE ---
        const syllabusData = [
            // PHASE 1: SYLLABUS COMPLETION (18 Jan - 10 Feb)
            { id: 1, date: "18 Jan", cat: "Prose", title: "A Letter to God", task: "Learn Long Answers + Translation" },
            { id: 2, date: "19 Jan", cat: "Poetry", title: "Dust of Snow + Fire/Ice", task: "Central Idea + MCQs" },
            { id: 3, date: "20 Jan", cat: "Prose", title: "Nelson Mandela", task: "Oral Comprehension Qs" },
            { id: 4, date: "21 Jan", cat: "Supp", title: "Triumph of Surgery", task: "Character Sketch: Tricki" },
            { id: 5, date: "22 Jan", cat: "Grammar", title: "Tenses Revision", task: "Solve 20 Exercises" },
            { id: 6, date: "23 Jan", cat: "Prose", title: "Two Stories Flying", task: "Seagull & Black Aeroplane" },
            { id: 7, date: "24 Jan", cat: "Writing", title: "Letter to Editor", task: "Memorize Format + 1 Example" },
            { id: 8, date: "25 Jan", cat: "Supp", title: "The Thief's Story", task: "Hari Singh Sketch + Values" },
            { id: 9, date: "26 Jan", cat: "Prose", title: "Anne Frank", task: "Diary Entry Format check" },
            { id: 10, date: "27 Jan", cat: "Poetry", title: "Tiger in Zoo + Wild Animals", task: "Poetic Devices (Metaphor etc)" },
            { id: 11, date: "28 Jan", cat: "Grammar", title: "Active/Passive Voice", task: "Change the voice rules" },
            { id: 12, date: "29 Jan", cat: "Supp", title: "Midnight Visitor", task: "Ausable's Intelligence Qs" },
            { id: 13, date: "30 Jan", cat: "Prose", title: "Glimpses of India", task: "Goa, Coorg, Assam (Short Ans)" },
            { id: 14, date: "31 Jan", cat: "Writing", title: "Article Writing", task: "Topic: Pollution / Mobile Phones" },
            { id: 15, date: "01 Feb", cat: "Supp", title: "Question of Trust", task: "Horace Danby Character" },
            { id: 16, date: "02 Feb", cat: "Grammar", title: "Narration (Direct/Indirect)", task: "Convert Dialogues" },
            { id: 17, date: "03 Feb", cat: "Prose", title: "Mijbil the Otter", task: "Summary reading" },
            { id: 18, date: "04 Feb", cat: "Poetry", title: "The Ball Poem + Amanda", task: "Theme of loss & freedom" },
            { id: 19, date: "05 Feb", cat: "Supp", title: "Footprints w/o Feet", task: "Griffin's Lawlessness Qs" },
            { id: 20, date: "06 Feb", cat: "Prose", title: "Madam Rides the Bus", task: "Valli's Character Sketch" },
            { id: 21, date: "07 Feb", cat: "Grammar", title: "Prepositions & Spelling", task: "Fill in the blanks" },
            { id: 22, date: "08 Feb", cat: "Supp", title: "Making of a Scientist", task: "Ebright's curiosity" },
            { id: 23, date: "09 Feb", cat: "Lit", title: "Sermon at Benares", task: "Life & Death Philosophy" },
            { id: 24, date: "10 Feb", cat: "Supp", title: "Bholi + Book Saved Earth", task: "Bholi's Teacher Role" },
        ];

        const powerBoostData = [
            // PHASE 2: POWER BOOST (11 Feb - 18 Feb)
            { id: 25, date: "11 Feb", type: "mock", title: "üî¥ MOCK TEST 1", task: "2024 Paper - 3 Hours Strict" },
            { id: 26, date: "12 Feb", type: "rev", title: "Writing Masterclass", task: "Revise all 5 formats again" },
            { id: 27, date: "13 Feb", type: "mock", title: "üî¥ MOCK TEST 2", task: "Sample Paper 2025" },
            { id: 28, date: "14 Feb", type: "rev", title: "Grammar Rules 101", task: "All Rules One Shot" },
            { id: 29, date: "15 Feb", type: "rev", title: "Literature Gaps", task: "Read only forgotten chapters" },
            { id: 30, date: "16 Feb", type: "mock", title: "üî¥ MOCK TEST 3", task: "Self Assessment" },
            { id: 31, date: "17 Feb", type: "chill", title: "Final Polish", task: "Author Names + Relax" },
            { id: 32, date: "18 Feb", type: "win", title: "üî• EXAM DAY", task: "Go and Conquer!" },
        ];

        // --- APP STATE ---
        const APP_KEY = 'topper_os_data';
        let progress = JSON.parse(localStorage.getItem(APP_KEY)) || {};
        let currentRoute = 'home';

        // --- INITIALIZATION ---
        window.onload = () => {
            lucide.createIcons();
            initInstallLogic();
            router('home');
        };

        // --- ROUTING SYSTEM ---
        function router(route) {
            currentRoute = route;
            const content = document.getElementById('app-content');
            
            // Update Tab Icons
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            if(route === 'home') document.querySelectorAll('.nav-item')[0].classList.add('active');
            if(route === 'syllabus') document.querySelectorAll('.nav-item')[1].classList.add('active');
            if(route === 'boost') document.querySelectorAll('.nav-item')[2].classList.add('active');

            // Render Views
            if(route === 'home') content.innerHTML = renderHome();
            if(route === 'syllabus') content.innerHTML = renderList(syllabusData, "Syllabus Tracker", "18 Jan - 10 Feb");
            if(route === 'boost') content.innerHTML = renderList(powerBoostData, "Power Boost ‚ö°", "11 Feb - 18 Feb", true);
            
            lucide.createIcons();
        }

        // --- VIEWS ---
        function renderHome() {
            const total = syllabusData.length + powerBoostData.length;
            const done = Object.keys(progress).length;
            const pct = Math.round((done / total) * 100);

            // Find Today's Task (Logic adapted for demo)
            // In real usage, compare dates. For now, showing next pending.
            const nextTask = [...syllabusData, ...powerBoostData].find(t => !progress[t.id]) || {title: "All Done!", task: "You are ready!"};

            return `
                <div class="p-6 space-y-8 animate-[fadeIn_0.5s_ease-out]">
                    
                    <!-- Progress Circle -->
                    <div class="flex justify-center py-4">
                        <div class="relative w-48 h-48 flex items-center justify-center">
                            <svg class="w-full h-full transform -rotate-90">
                                <circle cx="96" cy="96" r="88" stroke="#1f2937" stroke-width="12" fill="none"></circle>
                                <circle cx="96" cy="96" r="88" stroke="#3b82f6" stroke-width="12" fill="none" stroke-dasharray="552" stroke-dashoffset="${552 - (552 * pct) / 100}" class="transition-all duration-1000"></circle>
                            </svg>
                            <div class="absolute text-center">
                                <div class="text-5xl font-black text-white">${pct}%</div>
                                <div class="text-xs text-gray-400 uppercase tracking-widest mt-1">Ready</div>
                            </div>
                        </div>
                    </div>

                    <!-- Today's Card -->
                    <div>
                        <h2 class="text-sm font-bold text-gray-500 mb-3 uppercase tracking-wider">Up Next</h2>
                        <div class="bg-gray-900 border border-gray-800 rounded-3xl p-6 relative overflow-hidden neon-border">
                            <div class="absolute top-0 right-0 p-4 opacity-10">
                                <i data-lucide="target" class="w-24 h-24 text-blue-500"></i>
                            </div>
                            <div class="relative z-10">
                                <span class="bg-blue-500/20 text-blue-400 text-[10px] font-bold px-2 py-1 rounded mb-2 inline-block">${nextTask.date || 'Now'}</span>
                                <h3 class="text-2xl font-bold text-white mb-1">${nextTask.title}</h3>
                                <p class="text-gray-400 text-sm leading-relaxed">${nextTask.task}</p>
                                <button onclick="router('${nextTask.id > 24 ? 'boost' : 'syllabus'}')" class="mt-4 bg-white text-black px-6 py-2 rounded-full text-xs font-bold hover:bg-gray-200 transition">GO TO TASK</button>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-900/50 rounded-2xl p-4 text-center border border-gray-800">
                            <div class="text-3xl font-bold text-emerald-400">${done}</div>
                            <div class="text-[10px] text-gray-500 uppercase">Tasks Done</div>
                        </div>
                        <div class="bg-gray-900/50 rounded-2xl p-4 text-center border border-gray-800">
                            <div class="text-3xl font-bold text-purple-400">${total - done}</div>
                            <div class="text-[10px] text-gray-500 uppercase">Remaining</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderList(data, title, subtitle, isBoost = false) {
            let html = `
                <div class="p-6 pb-24 animate-[fadeIn_0.3s_ease-out]">
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold text-white">${title}</h2>
                        <p class="text-xs text-gray-400 font-mono">${subtitle}</p>
                    </div>
                    <div class="space-y-3">
            `;

            data.forEach((item, index) => {
                const isDone = progress[item.id];
                const cardColor = isBoost ? 'bg-gray-900/80 border-purple-900/30' : 'bg-gray-900/60 border-gray-800';
                
                html += `
                    <div onclick="toggle(${item.id})" class="group relative ${cardColor} border rounded-2xl p-4 flex items-center gap-4 transition-all active:scale-[0.98] ${isDone ? 'checked-task opacity-60' : ''}">
                        
                        <!-- Checkbox -->
                        <div class="w-6 h-6 rounded-full border-2 border-gray-600 flex items-center justify-center check-box flex-shrink-0 ${isDone ? 'checked' : ''}">
                            ${isDone ? '<i data-lucide="check" class="w-3 h-3 text-black"></i>' : ''}
                        </div>

                        <!-- Text -->
                        <div class="flex-1">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-[10px] font-bold ${isBoost ? 'text-purple-400' : 'text-blue-400'} bg-white/5 px-2 py-0.5 rounded">${item.date}</span>
                                <span class="text-[10px] text-gray-600 font-medium">${item.cat || item.type}</span>
                            </div>
                            <h3 class="text-base font-bold text-white task-title leading-tight">${item.title}</h3>
                            <p class="text-xs text-gray-500 mt-1 line-clamp-1">${item.task}</p>
                        </div>
                    </div>
                `;
            });
            html += `</div></div>`;
            return html;
        }

        // --- LOGIC CORE ---
        function toggle(id) {
            if(progress[id]) delete progress[id];
            else {
                progress[id] = true;
                if(navigator.vibrate) navigator.vibrate(50);
            }
            localStorage.setItem(APP_KEY, JSON.stringify(progress));
            
            // Re-render current view only
            if(currentRoute === 'syllabus') document.getElementById('app-content').innerHTML = renderList(syllabusData, "Syllabus Tracker", "18 Jan - 10 Feb");
            else if(currentRoute === 'boost') document.getElementById('app-content').innerHTML = renderList(powerBoostData, "Power Boost ‚ö°", "11 Feb - 18 Feb", true);
            
            lucide.createIcons();
        }

        // --- INSTALLATION MAGIC (PWA) ---
        let deferredPrompt;

        function initInstallLogic() {
            const installBtn = document.getElementById('install-btn');

            // 1. Listen for the browser's event
            window.addEventListener('beforeinstallprompt', (e) => {
                // Prevent the mini-infobar from appearing on mobile
                e.preventDefault();
                // Stash the event so it can be triggered later.
                deferredPrompt = e;
                // Update UI notify the user they can install the PWA
                installBtn.classList.remove('hidden');
                console.log("Install prompt captured!");
            });

            // 2. Handle Button Click
            installBtn.addEventListener('click', async () => {
                if (deferredPrompt) {
                    // Show the native install prompt
                    deferredPrompt.prompt();
                    // Wait for the user to respond to the prompt
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log(`User response to the install prompt: ${outcome}`);
                    // We've used the prompt, and can't use it again, throw it away
                    deferredPrompt = null;
                    if(outcome === 'accepted') {
                        installBtn.classList.add('hidden');
                    }
                } else {
                    // Fallback for devices where prompt is not available (like iOS or already installed)
                    alert("‚ö†Ô∏è INSTALL GUIDE:\n\n1. Tap the Share/Menu button in your browser.\n2. Select 'Add to Home Screen'.\n3. Enjoy your Topper App!");
                }
            });

            // 3. Check if already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                installBtn.classList.add('hidden');
            }
        }

    </script>
</body>
</html>

