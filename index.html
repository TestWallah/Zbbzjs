<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>English Topper App üèÜ</title>
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            font-family: 'Outfit', sans-serif;
            user-select: none; /* App feel */
        }

        body {
            background-color: #000;
            color: white;
            overflow: hidden; /* Prevent body scroll, handle inside app-shell */
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Mobile Container to simulate App on Desktop */
        #app-shell {
            width: 100%;
            height: 100%;
            max-width: 480px; /* Mobile width cap */
            background: #0f172a;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 50px rgba(79, 70, 229, 0.2);
        }

        /* Scrollable Content Area */
        #content-area {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 90px; /* Space for bottom nav */
            padding-top: 10px;
        }

        /* Hide Scrollbar */
        #content-area::-webkit-scrollbar {
            display: none;
        }

        /* Animations */
        .page-enter {
            animation: slideIn 0.3s ease-out forwards;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Checkbox */
        .check-circle {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid #6366f1;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .task-row.completed .check-circle {
            background: #6366f1;
            transform: scale(1.1);
        }
        .task-row.completed h3 {
            text-decoration: line-through;
            color: #64748b;
        }

        /* Install Button Animation */
        .install-pulse {
            animation: pulse-glow 2s infinite;
        }
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(99, 102, 241, 0); }
            100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); }
        }

        /* Glassmorphism */
        .glass {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Power Mode Styles */
        .power-mode-bg {
            background: linear-gradient(135deg, #4f46e5 0%, #ec4899 100%);
        }
    </style>
</head>
<body>

    <div id="app-shell">
        
        <!-- App Header -->
        <div class="px-6 pt-12 pb-4 flex justify-between items-center bg-slate-900/90 backdrop-blur-md z-20 sticky top-0">
            <div>
                <p class="text-xs text-indigo-400 font-bold tracking-wider uppercase">Mission Rank #1</p>
                <h1 class="text-2xl font-extrabold text-white">Hello, Topper! üëã</h1>
            </div>
            <!-- Custom Install Button -->
            <button id="installAppBtn" class="hidden install-pulse bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-4 py-2 rounded-full text-xs font-bold shadow-lg flex items-center gap-2 active:scale-95 transition-transform">
                <i data-lucide="download" class="w-4 h-4"></i> Install
            </button>
        </div>

        <!-- Main Content Area (Pages will be injected here) -->
        <div id="content-area" class="px-5">
            <!-- Dynamic Content -->
        </div>

        <!-- Bottom Navigation Bar -->
        <div class="absolute bottom-0 w-full bg-slate-900/95 border-t border-slate-800 backdrop-blur-lg flex justify-around items-center py-4 pb-6 z-30">
            <button onclick="switchTab('dashboard')" class="nav-btn flex flex-col items-center gap-1 text-indigo-400 w-1/3">
                <i data-lucide="layout-dashboard" class="w-6 h-6"></i>
                <span class="text-[10px] font-medium">Home</span>
            </button>
            <button onclick="switchTab('roadmap')" class="nav-btn flex flex-col items-center gap-1 text-slate-500 w-1/3">
                <i data-lucide="map" class="w-6 h-6"></i>
                <span class="text-[10px] font-medium">Roadmap</span>
            </button>
            <button onclick="switchTab('power')" class="nav-btn flex flex-col items-center gap-1 text-slate-500 w-1/3">
                <i data-lucide="zap" class="w-6 h-6"></i>
                <span class="text-[10px] font-medium">Power Boost</span>
            </button>
        </div>

    </div>

    <script>
        // --- SYLLABUS DATA (18 Jan to 18 Feb) ---
        const syllabus = [
            // PHASE 1: THE GRIND (18 Jan - 10 Feb)
            { date: "18 Jan", type: "grind", title: "Prose: A Letter to God", sub: "Learn Long Ans + Tenses (Present)", id: "d1" },
            { date: "19 Jan", type: "grind", title: "Poetry: Dust of Snow + Fire & Ice", sub: "Central Idea + Tenses (Past)", id: "d2" },
            { date: "20 Jan", type: "grind", title: "Prose: Nelson Mandela", sub: "Short Q/A + Tenses (Future)", id: "d3" },
            { date: "21 Jan", type: "grind", title: "Supp: Triumph of Surgery", sub: "Character Sketch: Tricki + Reordering", id: "d4" },
            { date: "22 Jan", type: "grind", title: "Prose: Two Stories about Flying", sub: "Active-Passive Voice Rules", id: "d5" },
            { date: "23 Jan", type: "grind", title: "Writing: Letter (Editor)", sub: "Practice Format + Passive Voice", id: "d6" },
            { date: "24 Jan", type: "grind", title: "Poetry: A Tiger in the Zoo", sub: "Stanza MCQs + Direct-Indirect", id: "d7" },
            { date: "25 Jan", type: "grind", title: "Supp: The Thief's Story", sub: "Hari Singh Sketch + Narrations", id: "d8" },
            { date: "26 Jan", type: "grind", title: "Prose: Anne Frank", sub: "Diary Entry Format + Punctuation", id: "d9" },
            { date: "27 Jan", type: "grind", title: "Poetry: Wild Animals + Ball Poem", sub: "Poetic Devices + Prepositions", id: "d10" },
            { date: "28 Jan", type: "grind", title: "Supp: Midnight Visitor", sub: "Ausable's Brain + Prepositions", id: "d11" },
            { date: "29 Jan", type: "grind", title: "Prose: Glimpses of India", sub: "All 3 Parts + Articles (A, An, The)", id: "d12" },
            { date: "30 Jan", type: "grind", title: "Writing: Article Writing", sub: "Topics: Pollution, Games + Translation", id: "d13" },
            { date: "31 Jan", type: "grind", title: "Supp: Question of Trust", sub: "Horace Danby + Spellings", id: "d14" },
            { date: "01 Feb", type: "grind", title: "Review Day: Grammar", sub: "Solve 50 MCQs Mixed", id: "d15" },
            { date: "02 Feb", type: "grind", title: "Prose: Mijbil the Otter", sub: "Travel Route + Translation 5 lines", id: "d16" },
            { date: "03 Feb", type: "grind", title: "Poetry: Amanda", sub: "Amanda's desire + Unseen Passage", id: "d17" },
            { date: "04 Feb", type: "grind", title: "Supp: Footprints without Feet", sub: "Griffin's Character + Letter (Complaint)", id: "d18" },
            { date: "05 Feb", type: "grind", title: "Prose: Madam Rides the Bus", sub: "Valli's Character + Application", id: "d19" },
            { date: "06 Feb", type: "grind", title: "Poetry: The Trees + Fog", sub: "Central Ideas + Article (Science)", id: "d20" },
            { date: "07 Feb", type: "grind", title: "Supp: Making of a Scientist", sub: "Richard Ebright + Report Writing", id: "d21" },
            { date: "08 Feb", type: "grind", title: "Prose: Sermon at Benares", sub: "Buddha's Teaching + Translation", id: "d22" },
            { date: "09 Feb", type: "grind", title: "Supp: Necklace + Hack Driver", sub: "Matilda & Lawyer + Full Grammar", id: "d23" },
            { date: "10 Feb", type: "grind", title: "Supp: Bholi + Book Saved Earth", sub: "Bholi's Teacher + OMR Sheet Practice", id: "d24" },
            
            // PHASE 2: POWER BOOST (11 Feb - 17 Feb)
            { date: "11 Feb", type: "power", title: "üî• POWER MOCK 1", sub: "Solve 2024 Paper (Set A) - 3 Hours", id: "d25" },
            { date: "12 Feb", type: "power", title: "üî• POWER MOCK 2", sub: "Solve 2024 Paper (Set B) - 3 Hours", id: "d26" },
            { date: "13 Feb", type: "power", title: "‚ö° Rapid Fire Grammar", sub: "Revise 100 Rules in 2 Hours", id: "d27" },
            { date: "14 Feb", type: "power", title: "üìù Writing Masterclass", sub: "Memorize 5 Articles & 3 Letters", id: "d28" },
            { date: "15 Feb", type: "power", title: "üî• POWER MOCK 3", sub: "Sample Paper 2025 (Self Test)", id: "d29" },
            { date: "16 Feb", type: "power", title: "üßò‚Äç‚ôÇÔ∏è Weakness Fixer", sub: "Only revise what you forget", id: "d30" },
            { date: "17 Feb", type: "power", title: "üöÄ FINAL LAUNCH", sub: "Author Names, Formats, Sleep Early", id: "d31" },
            { date: "18 Feb", type: "exam", title: "‚öîÔ∏è EXAM DAY", sub: "Go & Win! Best of Luck!", id: "d32" }
        ];

        // --- STATE MANAGEMENT ---
        const APP_ID = 'topper_app_v2';
        let progress = JSON.parse(localStorage.getItem(APP_ID)) || {};
        let currentTab = 'dashboard';

        // --- INIT ---
        window.onload = () => {
            lucide.createIcons();
            initInstall();
            switchTab('dashboard'); // Default tab
        };

        // --- NAVIGATION ---
        function switchTab(tab) {
            currentTab = tab;
            const content = document.getElementById('content-area');
            const btns = document.querySelectorAll('.nav-btn');
            
            // Update Active State
            btns.forEach(btn => {
                btn.classList.remove('text-indigo-400');
                btn.classList.add('text-slate-500');
            });
            
            // Highlight active button
            if(tab === 'dashboard') btns[0].classList.add('text-indigo-400', 'text-slate-500');
            if(tab === 'dashboard') btns[0].classList.remove('text-slate-500');
            
            if(tab === 'roadmap') btns[1].classList.add('text-indigo-400');
            if(tab === 'roadmap') btns[1].classList.remove('text-slate-500');

            if(tab === 'power') btns[2].classList.add('text-pink-500'); // Special color for power
            if(tab === 'power') btns[2].classList.remove('text-slate-500');

            // Render Content
            if (tab === 'dashboard') renderDashboard();
            if (tab === 'roadmap') renderRoadmap();
            if (tab === 'power') renderPowerMode();
        }

        // --- RENDERERS ---

        function renderDashboard() {
            const today = new Date();
            // Simulating today as a date within our range for demo if outside range
            // let dateStr = `${today.getDate()} ${today.toLocaleString('default', { month: 'short' })}`;
            // NOTE: For User Demo, let's calculate the "Current Day" logic.
            // If today is NOT in range, we show Day 1.
            
            const totalTasks = syllabus.length;
            const doneTasks = Object.keys(progress).length;
            const percent = Math.round((doneTasks / totalTasks) * 100);

            // Find "Today's" task or next pending task
            let activeTask = syllabus.find(t => !progress[t.id]) || syllabus[syllabus.length - 1];

            document.getElementById('content-area').innerHTML = `
                <div class="page-enter">
                    <!-- Progress Card -->
                    <div class="glass rounded-3xl p-6 mb-6 relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-500 rounded-full filter blur-3xl opacity-20 -mr-10 -mt-10"></div>
                        <h2 class="text-slate-400 text-sm font-medium mb-1">Total Progress</h2>
                        <div class="flex items-end gap-2 mb-2">
                            <span class="text-4xl font-bold text-white">${percent}%</span>
                            <span class="text-indigo-400 text-sm font-bold mb-1">Topper Loading...</span>
                        </div>
                        <div class="w-full bg-slate-700 h-2 rounded-full overflow-hidden">
                            <div class="bg-indigo-500 h-full transition-all duration-1000" style="width: ${percent}%"></div>
                        </div>
                    </div>

                    <!-- Today's Focus -->
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                        <i data-lucide="target" class="w-5 h-5 text-red-400"></i> Next Target
                    </h3>

                    <div class="glass rounded-2xl p-5 border-l-4 border-l-indigo-500 relative">
                        <div class="flex justify-between items-start">
                            <div>
                                <span class="bg-indigo-500/20 text-indigo-300 text-[10px] font-bold px-2 py-1 rounded mb-2 inline-block">${activeTask.date}</span>
                                <h2 class="text-xl font-bold text-white leading-tight">${activeTask.title}</h2>
                                <p class="text-slate-400 text-sm mt-2">${activeTask.sub}</p>
                            </div>
                            <div onclick="toggleTask('${activeTask.id}')" class="check-circle cursor-pointer ${progress[activeTask.id] ? 'bg-indigo-500' : ''}">
                                ${progress[activeTask.id] ? '<i data-lucide="check" class="w-4 h-4 text-white"></i>' : ''}
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-2 gap-4 mt-6">
                        <div class="bg-slate-800/50 p-4 rounded-2xl text-center">
                            <i data-lucide="book" class="w-6 h-6 text-blue-400 mx-auto mb-2"></i>
                            <div class="text-xs text-slate-400">Chapters Left</div>
                            <div class="text-xl font-bold">${syllabus.filter(t => t.type==='grind').length - Object.keys(progress).filter(k => parseInt(k.replace('d','')) <= 24).length}</div>
                        </div>
                        <div class="bg-slate-800/50 p-4 rounded-2xl text-center">
                            <i data-lucide="trophy" class="w-6 h-6 text-yellow-400 mx-auto mb-2"></i>
                            <div class="text-xs text-slate-400">Mock Tests</div>
                            <div class="text-xl font-bold">3 Pending</div>
                        </div>
                    </div>
                </div>
            `;
            lucide.createIcons();
        }

        function renderRoadmap() {
            let html = `
                <div class="page-enter">
                    <h2 class="text-xl font-bold mb-4 sticky top-0 bg-[#0f172a] py-2 z-10">üìÖ Full Plan (18 Jan - 10 Feb)</h2>
                    <div class="space-y-3">
            `;

            syllabus.filter(t => t.type === 'grind').forEach(item => {
                const isDone = progress[item.id];
                html += `
                    <div onclick="toggleTask('${item.id}')" class="task-row ${isDone ? 'completed' : ''} glass p-4 rounded-xl flex items-center justify-between cursor-pointer active:scale-95 transition-transform">
                        <div class="flex-1">
                            <div class="text-xs text-slate-500 font-mono mb-1">${item.date}</div>
                            <h3 class="text-sm font-semibold text-white transition-colors">${item.title}</h3>
                            <p class="text-xs text-slate-400 mt-1 truncate">${item.sub}</p>
                        </div>
                        <div class="check-circle ml-3 flex-shrink-0">
                            ${isDone ? '<i data-lucide="check" class="w-4 h-4 text-white"></i>' : ''}
                        </div>
                    </div>
                `;
            });

            html += `</div></div>`;
            document.getElementById('content-area').innerHTML = html;
            lucide.createIcons();
        }

        function renderPowerMode() {
            let html = `
                <div class="page-enter">
                    <div class="bg-gradient-to-r from-pink-600 to-purple-600 rounded-2xl p-6 mb-6 text-center shadow-lg shadow-pink-500/20">
                        <h2 class="text-2xl font-black italic tracking-tighter">POWER BOOST ‚ö°</h2>
                        <p class="text-xs text-pink-100 mt-1 opacity-90">Only for those who want Rank #1</p>
                    </div>

                    <h3 class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-4">Final Battle (11 Feb - 18 Feb)</h3>
                    <div class="space-y-3">
            `;

            syllabus.filter(t => t.type === 'power' || t.type === 'exam').forEach(item => {
                const isDone = progress[item.id];
                const isExam = item.type === 'exam';
                html += `
                    <div onclick="toggleTask('${item.id}')" class="task-row ${isDone ? 'completed' : ''} bg-slate-800/60 border border-slate-700 p-4 rounded-xl flex items-center justify-between cursor-pointer active:scale-95 transition-transform ${isExam ? 'border-yellow-500/50 bg-yellow-900/10' : ''}">
                        <div class="flex-1">
                            <div class="text-xs text-pink-400 font-bold mb-1">${item.date}</div>
                            <h3 class="text-base font-bold text-white transition-colors ${isExam ? 'text-yellow-400' : ''}">${item.title}</h3>
                            <p class="text-xs text-slate-400 mt-1">${item.sub}</p>
                        </div>
                        <div class="check-circle ml-3 flex-shrink-0 ${isExam ? 'border-yellow-400' : 'border-pink-500'}">
                            ${isDone ? '<i data-lucide="check" class="w-4 h-4 text-white"></i>' : ''}
                        </div>
                    </div>
                `;
            });

            html += `</div></div>`;
            document.getElementById('content-area').innerHTML = html;
            lucide.createIcons();
        }

        // --- ACTIONS ---
        function toggleTask(id) {
            if (progress[id]) {
                delete progress[id];
            } else {
                progress[id] = true;
                // Vibrate for feedback
                if (navigator.vibrate) navigator.vibrate(30);
            }
            localStorage.setItem(APP_ID, JSON.stringify(progress));
            
            // Re-render current tab
            if (currentTab === 'dashboard') renderDashboard();
            else if (currentTab === 'roadmap') renderRoadmap();
            else renderPowerMode();
        }

        // --- PWA INSTALL LOGIC ---
        let deferredPrompt;
        function initInstall() {
            const btn = document.getElementById('installAppBtn');
            
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                btn.classList.remove('hidden');
            });

            btn.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    deferredPrompt = null;
                    if(outcome === 'accepted') btn.classList.add('hidden');
                } else {
                    // Fallback for when browser blocks automatic prompt or in iframe
                    alert("App Install Kaise Karein:\n\n1. Browser ke menu (‚ãÆ) par click karein.\n2. 'Install App' ya 'Add to Home Screen' select karein.\n3. Bas ho gaya! üöÄ");
                }
            });

            if (window.matchMedia('(display-mode: standalone)').matches) {
                btn.classList.add('hidden');
            }
        }
    </script>
</body>
</html>

